# 员工信息管理系统需求文档

## 1. 增加员工的联系方式：
    - 电话号码
    - 电子邮件地址
    - 紧急联系人信息
        - 紧急联系人电话
        - 紧急联系人关系
   ✅ 已完成
   - 已创建 employee_profile 表结构
   - 已创建 EmployeeProfile 实体类
   - 已提供 insert_employee_profile.sql 数据插入脚本

## 2. 分页查询每个员工的：
    - 员工姓名
    - 部门名称
    - 总收入
    - 薪资等级
    - 下级员工的姓名
    - 联系方式
   ✅ 已完成
   - 接口：GET /employees/details?current=1&size=10
   - 已实现 EmployeeDetailVO 视图对象
   - 已在 XML 中使用 ResultMap 映射
   - 使用 MyBatis Plus 分页功能
   - 自动填充下级员工姓名列表

## 3. 按部门查询：
   - 员工的名称，职位，雇佣时间，联系方式，上级员工的姓名
   ✅ 已完成
   - 接口：GET /employees/by-dept?deptno={部门编号}
   - 已实现 EmployeeByDeptVO 视图对象
   - 已在 XML 中使用 ResultMap 映射
   - 包含员工姓名、职位、雇佣时间、联系方式、上级员工姓名

## 4. 完成员工添加和员工列表的功能：
    - 给出前端页面设计
   ⚠️ 部分完成
   - ✅ 员工列表查询：GET /employees (支持按empno和ename查询)
   - ✅ 员工更新：PUT /employees（使用 MyBatis Plus updateById，支持部分字段更新）
   - ✅ 员工删除：DELETE /employees?empno={员工编号}（使用软删除，@TableLogic 自动处理）
   - ✅ 员工添加接口：POST /employees（支持新增员工，默认状态为"待入职"，部门为0"待分配"）
   - ❌ 前端页面设计：未设计

## 5. 删除部门（考虑好删除部门时，部门员工的处理）
   ✅ 已完成
   - ✅ 已实现删除部门接口：DELETE /department/{deptno}
   - ✅ 部门员工处理策略：将该部门下的所有员工部门改为0（待分配），保持原状态不变
   - ✅ 使用事务确保数据一致性
   - ✅ 软删除部门表记录

## 6. 按部门汇总统计：
   - 员工总数
   - 部门总薪资
   - 部门平均薪资
   - 部门最高薪资
   - 部门最低薪资
   - 部门总佣金
   - 在职人数
   - 经理人数
   - 前端使用可以视化图表展示统计结果
   ⚠️ 部分完成
   - ✅ 已有 SQL 查询示例（db_postgres.sql 第125-142行）
   - ❌ 未实现 REST 接口
   - ❌ 未实现前端可视化图表

## 7. 日志功能：
   记录每次对员工信息的增删改操作，包含操作时间、操作类型和操作内容。
   aop方式实现日志功能
   日志文件每小时一生成的滚动文件
   每天0点将文件移动到日志目录的bak/下,进行压缩备份
   ⚠️ 部分完成
   - ✅ 已使用 AOP 方式实现日志功能（LogAspect）
   - ✅ 已使用 @LogRecord 注解记录操作
   - ✅ 已记录操作时间、操作类型和操作内容（包含URL、HTTP方法、类方法、参数、返回结果）
   - ✅ 已为查询、更新、删除、分页查询、按部门查询等操作添加日志注解
   - ⚠️ 日志文件滚动：使用 Spring Boot 默认配置（按天滚动，自动压缩为 .gz）
   - ❌ 每小时滚动：未配置（需自定义 logback-spring.xml）
   - ❌ 每天0点移动到bak/并压缩：未实现（需定时任务 LogBackupTask）

## 8. 添加Swagger文档接口
   ❌ 未完成
   - 需要引入 Swagger/OpenAPI 依赖

### 测试覆盖
✅ 已完成单元测试
   - EmpServiceTest：Service 层测试（查询、更新、分页、按部门查询、软删除等）
   - EmpControllerTest：Controller 层测试（REST 接口测试）